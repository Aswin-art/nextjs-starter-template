# 1. Pastikan PATH terbaca (Fix untuk VS Code GUI)
[ -f "$HOME/.profile" ] && . "$HOME/.profile"
[ -f "$HOME/.zshrc" ] && . "$HOME/.zshrc"

# 2. Defensive Check
# Cek apakah pnpm command ada sebelum menjalankannya
if ! command -v pnpm >/dev/null 2>&1; then
  echo "❌ Error: pnpm not found. Please commit from the Terminal."
  exit 1
fi

echo "Running pre-commit checks..."

echo "1/3 Formatting..."
pnpm format || { echo "❌ Format failed"; exit 1; }

echo "2/3 Linting..."
pnpm lint || { echo "❌ Lint failed"; exit 1; }

echo "3/3 Testing (Headless)..."
pnpm test run || { echo "❌ Tests failed"; exit 1; } 

echo "✅ Ready to commit!"